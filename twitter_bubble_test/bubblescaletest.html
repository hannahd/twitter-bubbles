<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>BallTest</title>
    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	<script src="processing-1.4.1.js"></script>
	<script src="jquery-1.7.1.min.js"></script>
	<script type="text/javascript" charset="utf-8">
		var resizeSketches;
		var jswidth;
		var jsheight;
		
		
		var bound = false;
		
		function bindJavascript() {
		  var pjs = Processing.getInstanceById('bubble_stream');
		  if(pjs!=null) {
			console.log(pjs);
		    pjs.bindJavascript(this);
		    bound = true;
		  }
		  if(!bound) setTimeout(bindJavascript, 250);
		}
		
		function getW() {
		   return jswidth;
		 }
		function getH() {
		   return jsheight;
		 }
		
		resizeSketches = function() {
		  var canvas, sketch;
		  canvas = $('canvas');
		  jswidth = $(window).width();

		  jsheight = $(window).height();

		  canvas.attr('width', jswidth);
		  canvas.attr('height', jsheight);
		  sketch = Processing.getInstanceById('bubble_stream');
		  if (sketch === void 0) {
		    return null;//new Processing($("#bubble_stream")[0], jsCode);
		  } else {
		    return sketch.restart();
		  }
		};

		$(document).ready(function(){
			bindJavascript();
			$(window).on('resize', resizeSketches);
		});
	</script>
	<style type="text/css" media="screen">
		body, html,canvas{
			margin:0;
			padding:0;
		}
	</style>
</head>

<body id="home">
    <canvas data-processing-sources="bubbles_scale.pde" id="bubble_stream"></canvas>
</body>
</html>